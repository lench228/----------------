**
## 16.1. Особенности построения коммуникационной инфраструктуры небольшой организации. Требования к документированию и возможностям масштабирования коммуникационной инфраструктуры небольшой организации.

## Особенности построения
### Топологии 
---
	Небольшой сети обычно предусматривается одно WAN-подключение, реализованное посредством DSL-соединения, кабеля или Ethernet соединения
	Такие сети обычно просты 

### Выбор устройств
---
	Стоит смотреть на стоимость, скорость и типы портов и интерфейсов, расширяемость, функции и сервисы операционной системы 

### Ip-адресация 
---
	При реализации стоит создать схему IP-адресации и использовать её. 
	Все устройства должны иметь уникальный адрес
#### Устройства
---
	- Конечные устройства - учитывается к-во и тип подключения 
	- Серверы и периферийные устройства(принтеры, камеры безопасности)
	- Промежуточные устройства - маршрутизаторы, коммутаторы и точки доступа 
	Рекомендуется планировать, документировать и поддерживать схему в зависимости от типа устройства. 
### Резервирование 
---
	Чтобы обеспечить высокую надежность системы и устранить точки отказа, рекомендуется использовать резервирование(путем установки дублирующего оборудования, или предоставления дублирующих сетевых каналов для критически важных областей). 
### Управление трафиком 
---
	Маршрутизаторы и коммутаторы в небольшой сети необходимо настроить так, чтобы обработка трафика данных, передаваемых в режиме реального времени (например, голоса или видео), осуществлялась отдельно от обработки трафика других данных

## Масштабирование 
---
	**Эти элементы используются для принятия взвешенных решений в рамках масштабирования небольшой сети.**
	- Сетевая документация - Физическая и логическая топология (?)
	- Реестр устройств — список устройств, использующих или образующих сеть 
	- Бюджет - детализированный бюджет на ИТ, включая годовой бюджет на закупку оборудования на финансовый год 
	- Анализ трафика — протоколы, приложения и службы, а также их требования к трафику; должны быть задокументированы
	-
	**Анализ протоколов**
		По мере роста сети очень важно понимать тип и поток трафика, проходящего по сети
		Для того, чтобы определить характерные потоки трафика, важно: 
		• Захват трафика следует производить в период пиковой нагрузки, чтобы получить надлежащее представление о различных типах трафика 
		• Выполнить захват в различных сегментах сети; некоторые типы трафика будут ограничены определенными сегментами.
		 • Информация, собранная анализатором протоколов, оценивается на основе данных об источнике и получателе трафика, а также с учетом типа трафика. 
		 • Результаты анализа можно использовать при принятии решений об эффективном управлении трафиком
	Многие операционные системы предоставляют встроенные средства для отображения такой информации
	Например:
		• ОС и ее версия 
		• Использование ЦП 
		• Использование ОЗУ 
		• Использование дискового пространства 
		• Приложения, не являющиеся сетевыми 
		• Сетевые приложения
	Документирование снимков по сотрудникам в небольшой сети в динамике существенно повышает информированность администраторов сети о растущих требованиях к протоколам и связанных с ними потоках трафика




## 16.2. Мониторинг состояния коммуникационной инфраструктуры, определение производительности коммуникационной инфраструктуры с использованием команд OS Windows, Linux и Cisco IOS. Основные методы и принципы локализации и устранения неполадок

  
## Мониторинг состояний инфраструктуры 
---
### Ping
---
	Эта команда доступна в с большинстве ОС и является самой эффективной для быстрого тестирования подключений 3 уровня между IP источника/назначения
	Использует эхо протокола ICMP(тип 8) и эхо ответа ICMP(тип 0)
	Ping Cisco IOS  отправляет 5(windows 4) сообщений и ожидает 5(windows 4) ICMP ответов и также отображает индикаторы ответов: 
		! - Указывает на успешное подключение 
		. - Истек срок ожидания ICMP ответа 
		U - Маршрутизатор отправил сообщение о недостижимости(возможно маршрутизатор не знает направление к сети назначения или не может найти узел в сети назначения ) 
	Если ввести ping в EXEC режиме, без адреса, нам дадут настроить расширенный пинг, выбрать адрес, к-во повторений, протокол, размер дейтаграммы, время и другое 
### Traceroute
---
	Помогает найти проблемные области в сети, возвращает список переходов по мере маршрутизации пакета по сети  
	
	![[Pasted image 20240617034517.png]]
	Тут мы видим, что успешный ответ был получен только от R1. А второй шлюз не ответил нам, значит проблема возникает между R1 и R2! 
	в Cisco для работы этой команды используется UDP с недопустимым номером порта назначения. Поэтому  конечный пункт возвращает о недоступности
	Как и Ping расширенный есть и расширенный tracert, в EXEС моде, выбираем протокол, таргет и источник, время, к-во попыток, TTL дейтаграммы поочередно у циско. У windows мы указываем параметры при вводе команды (-6/-4 ipV6/4, -h (max_hops) - Максимально число шагов/hops/прыжков)  

### Производительность 
---
	Одним из наиболее эффективных инструментов мониторинга и устранения неполадок с производительностью сети является определение базового уровня сети. 
	• Одним из способов создания базового уровня является копирование и вставка результатов выполнения команды ping, trace или любой другой соответствующей команды в текстовый файл. В такие текстовые файлы можно добавить метку времени и дату, а затем сохранить их в архив для дальнейшего использования и сравнения.
	 • Следует рассмотреть такие объекты, как сообщения об ошибках и значения времени отклика между узлами
### Команды хоста 
---
#### Настройка IP конфигурации
---
	Windows - 
		Чтобы посмотреть маску адрес, маршрутизатор и DNS - ipconfig в cmd 
		Если узел настроен как DHCP-клиент, конфигурацию IP-адреса можно обновить с помощью команд ipconfig /release и ipconfig /renew
		Служба «Клиент DNS» на ПК с ОС Windows оптимизирует производительность разрешения имен DNS, сохраняя ранее разрешенные имена в памяти. На ПК с ОС Windows команда ipconfig /displaydns выводит на экран все кэшированные записи DNS.
	Linux - 
		Зависит от дистрибутива 
		В командной строке ifconfig, отображает состояния активных интерфейсов и их IP-конфигурации 
		команда ip address используется для отображение свойств и самих адресов, даже с её помощью моно их добавлять/удалять
	macOs -
		Сетевые настройки > Дополнительно для информации об IP 
		ifconfig также используется для проверки конфигурации 
		
### Arp
---
команда arp windows отображает список всех устройств, находящихся в данный момент в ARP-кэше узла.    
Команда arp -a отображает известный IP-адрес и привязку MAC-адреса
Чтобы проверить заполнение кэша ARP, выполните команду ping для проверки связи с устройством, чтобы для него была создана запись в таблице ARP


![[Pasted image 20240617040718.png]]


Show ip interface brief показывает сводку по ключевым данным для всех сетевых интерфейсов на маршрутизаторе 
### Локализация и исправление
---

| Шаг 1. Определение неполадки                                                          | • Первый шаг в процессе поиска и устранения неполадок. <br>• На этом этапе можно использовать различные методы, в том числе, можно расспросить пользователя, что может оказаться очень полезным.                                                      |
| ------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Шаг 2. Формирование предположений причинах неполадки                                  | После выявления проблемы попробуйте установить теорию вероятных причин. <br>• Обычно на этом этапе выявляется несколько возможных причин неполадки.                                                                                                   |
| Шаг 3. Проверка предположений с целью определения причины                             | • Проверьте свои предположения о вероятных причинах неполадки. • Вы можете попытаться устранить неполадку, применив быструю процедуру. <br>• Если с помощью быстрой процедуры не удается устранить неполадку, следует продолжить поиск точной причины |
| Шаг 4. Разработка плана действий решения проблем и его реализация.                    | Установив точную причину неполадки, разработайте план действий для ее устранения и выполните его.                                                                                                                                                     |
| Шаг 5. Полная проверка функционального состояния сети и принятие профилактических мер | • После устранения неполадки выполните полную проверку функционального состояния системы <br>• При необходимости примите профилактические меры во избежание повторения проблемы в будущем.                                                            |
| Шаг 6. Документирование полученных данных, принятых мер и результатов                 | • На последнем этапе процедуры поиска и устранения неполадок выполняется документирование полученных данных, выполненных действий и результатов. <br>• Эта информация очень важна для использования в будущем.                                        |

#### Неверная айпи адресация 
---
При неверной айпи адресации может помочь show ip interface и show ip interface brief
Такое случается из за ручной настройки адресов или в связи с неполадками DHCP (если используется автоматическое назначение)


#### Неполадки с шлюзом по умолчанию
---
Шлюзом по умолчанию для оконечного устройства является ближайшее сетевое устройство, которое способно пересылать трафик в другие сети. Если для устройства указан неверный или несуществующий адрес шлюза по умолчанию, оно не сможет связываться с устройствами в удаленных сетях.
• Так же, как и проблемы с IPv4-адресами, проблемы со шлюзом по умолчанию могут быть вызваны неверной настройкой (при назначении вручную) или неполадками DHCP (если используется автоматическое назначение)
решается проверкой шлюза по умолчанию и выполнением show ip route на маршрутизаторе, для отображения таблицы маршрутизации, можно убедиться в правильности настройки шлюза. 





## Протокол Ethernet. Управление доступом к среде передачи данных Ethernet (CSMA). Назначение и структура MAC -адреса. Формат, размеры и структура кадра Ethernet.

Информационное взаимодействие на канальном уровне сетей стандарта Ethernet разделено на два дополнительных уровня:
- LLC (Logical Link Control) — управление логическим каналом;
- MAC (Media Access Control) — управления доступом к среде передачи.

На уровне MAC реализуются алгоритмы протокола, которые отражают специфику используемой среды передачи, например, способы кодирования данных или обнаружения коллизий. На уровне LLC реализуются общие функции и алгоритмы формирования блоков данных протокола. Такое разделение позволяет с наименьшими изменениями реализовывать алгоритмы протокола Ethernet для различных сред передачи данных.
`
Физический адрес Ethernet состоит из двух компонентов:
- _идентификатора производителя оборудования_ (Vendor code) — 3 байта;
- _индивидуального идентификатора устройства_ — 3 байта.
Vender code дял обеспечения оригинальности выделяется по запросам фирм-производителей оборудования. Пример мак адреса- 16ричная форма, байты отделены - 

Индивидуальный адрес можно получить с помощью особого ПО, в таких мак адресах 1 во втором бите старшего байта.

Кадр ethernet состоит из 
	|1|DESTINATION ADDRESS — адрес назначения кадра|6|
	|2|SOURCE ADDRESS — адрес источника кадра|6|
	|3|LENGTH/TYPE — тип или длина полезной нагрузки кадра|2|
	|4|MAC CLIENT DATA + PAD — полезная нагрузка кадра|46—1500|
	|5|FRAME CHECK SEQUENCE — контрольная сумма кадра|4|

Адрес назначения - мак адрес получателя (unicast, broadcast, multicast)
Адрес источника- Мак адрес источника - только юникаст 

LENGTH/TYPE -  в зависимости от размещенного в нем значения может быть использовано для указания длины или типа полезной нагрузки данного кадра. Поскольку длина поля полезной нагрузки кадра Ethernet не может быть более 1500 байт, то значения поля LENGTH/TYPE превышающие 1536 (60016) можно использовать для указания типа полезной нагрузки кадра

|2048|0800|_IP_ _v4_ (Internet Protocol)|
|2054|0806|_ARP_ (Address Resolution Protocol)|

Если значение поля LENGTH/TYPE меньше или равно 1500, тип содержимого поля полезной нагрузки и режим информационного обмена для данного кадра определяется дополнительным заголовком LLC PDU
 
DSAP - адрес службы назначения     1
SSAP - адрес службы источника     1
CONTROL - управление    1 или 2 
INFORMATION - полезная нагрузка   переменная 
DSAP - адрес канального уровня порта назначения 
SSAP значение старшего бита определяет тип кадра 
CONTROL - передача управляемого слова форматы такие 
I - информационный формат
S служебный форма
U  управляющий формат 
В поле MAC CLIENT DATA размещается полезная нагрузка кадра. Длина этого поля является переменной и определяется размером инкапсулируемого блока данных верхнего уровня. Для обеспечения установленного размера коллизионного домена длина передаваемого кадра не должна быть менее 64 байт. При этом минимальная длина поля полезной нагрузки должна составлять 46 байт.


##  Способ построения и назначение таблицы MAC адресов и пересылки кадров коммутатора Ethernet. Базовые настройки портов на коммутаторах  и способы мониторинга их состояния.

### Способ построение и назначение таблицы MAC
---
	Коммутатор Ethernet (Ethernet Switch) это многопортовый мост, который выполняет обработку данных на L1 TCP/IP. Коммутатор анализирует МАС-адреса передаваемых кадров и отправляет их только через те свои порты, к которым подключены станции назначения для данного кадра.
	При передаче кадров коммутатор использует таблицу фильтрации (Content Addressable Memory, CAM). Если MAC-адрес назначения кадра отсутствует в CAM, коммутатор отправляет его через все свои порты, кроме того с которого кадр был принят.
	**Основные функции**
		Коммутатор записывает в таблицу фильтрации MAC_адрес источника, полученного кадра
		![[Pasted image 20240618012241.png]]
		Коммутатор отправляет кадр только на тот порт, который указан в таблице CAM.
		![[Pasted image 20240618012312.png]]
	
### Формирование таблицы CAM 

---
	Для того чтобы заполнить таблицу, мост использует режим самообучения. Мост фиксирует адрес источника у принятого кадра и формирует запись в своей таблице, указывая в ней номер порта, и МАС-адрес **именно** источника этого кадра.
	ПС4 захотел пообщаться с пк 3, мост отработал как хаб, отправил адрес во все порты, потом записал и закрепил за 3 портом адрес пк 4.
		![[Pasted image 20240618012759.png]]
	После запроса, пс3 отправляет ответ, и таким же образом он записывается в таблицу и получает порт 2. Его ответ идет СРАЗУ в пк 4, потому что мак пк 4 уже есть в таблице КАМ![[Pasted image 20240618013929.png]]
	Когда пк 4 отправит запрос в пк 1, произойдет то же самое. Запрос пройдет по всем ПК, кроме ПК4, а первый ответит
	![[Pasted image 20240618014037.png]]
	, и его также запишут в таблицу 
	![[Pasted image 20240618014107.png]] 
	Тут из за того, что адрес назначения закреплен за тем же портом, коммутатор удаляет кадр. 

	![[Pasted image 20240618014214.png]]	
К двум базовым параметрам коммутатора относятся пропускная способность (bandwidth) и дуплексный режим, которые задаются для каждого отдельного порта коммутатора.
Для обмена данными  используются два типа настроек дуплексного режима.
	• Полнодуплексный режим: одновременная отправка и получение данных в обе стороны.
	• Полудуплексный режим: отправка данных только одной стороной.
Автоопределение — это дополнительная функция, которой оснащено большинство коммутаторов и сетевых плат Ethernet. Автоопределение позволяет двум устройствам автоматически обмениваться информацией о скорости и возможностях дуплексного режима.
Важно чтобы оба коммутатора работали в одном режиме обмена данными, если они будут отличаться, возникнут проблемы с производительностью. 
Это происходит при сбросе одного или обоих портов канала, в результате чего автоопределение не приводит к одинаковой конфигурации обоих устройств связи. • Это также может произойти тогда, когда пользователи меняют конфигурацию на одной стороне канала и забывают про другую
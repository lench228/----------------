## Протокол Ethernet. Управление доступом к среде передачи данных Ethernet (CSMA). Назначение и структура MAC -адреса. Формат, размеры и структура кадра Ethernet.

### Ethernet
---
	Мэдклаф придумал
		Технология Ethernet разработана в середине 70 годов.
	В связи с появлением мини ЭВМ, появилась потребность обмена  информацией между ними. Идея в том, чтобы подключить эвм к одной среде с помощью коаксиального кабеля(и решить проблемы с коллизиями). 
	![[Pasted image 20240622232206.png]]
	Броадкаст позволяет добраться до нужного назначения, когда нужно узнать мак адрес назначения(ARP запрос)
	 
### CSMA/CD
В ходе развития технологии, мы пришли к витой паре, которая использовала кодирование сигнала по схеме Манчестер-2(сиплекс/полудуплекс). Сложно синхронизировать сигнал на большой скорости(если 2 одинаковых сигнала подряд). Поэтому передается сигнал перепадом, повторные импульсы зализываются и мы видим как надо. Решено пробовать разрешать коллизии. При возникновении коллизии возвращается в узлы каша, и её обнаруживает collision detect  происходит регулирование задержки повторной передачи с помощью алгоритма TBEBO. + есть ограничение на минимальный размер кадра(Если кадр будет слишком коротким, передающая его станция не успеет зафиксировать коллизию). Задержка распространения сигнала не должна превышать половины времени передачи кадра минимальной длины.  
Если 16 коллизий случились, то станции отрубаются от сети

![[Pasted image 20240623124318.png]]

Кадр ethernet состоит из 
	- Преамбула Она предназначена для подготовки преемников к получению кадра в старых версиях.(не входит в состав кадра, используется на среде передачи)
	- SFD отделяет начало кадра от его предшественника 
	- DA/SA - MAC-адреса назначения и источника 
	-  Type/Length - указание типа или длины полезной нагрузки 
	- Данные(46-4600)
	- FCS контрольная сумма кадра
	

про MAC адрес. Он должен обязательно быть глобально уникальным, чтобы станции могли работать. 
Физический адрес Ethernet состоит из двух компонентов:
- _идентификатора производителя оборудования_ (Vendor code) — назначаются комитетом IEEE, производители обращаются к ним чтобы они выделили под них эту часть адреса. Занимает 3 байта;
- _индивидуального идентификатора(серийный номер) устройства_ — им занимается производитель 3 байта.

Пример мак адреса(unicast)- 16ричная форма, байты отделены - 
Пример мак адреса(multicast)
Пример мак адреса(broadcast) - FF-FF...-FF  




##  Способ построения и назначение таблицы MAC адресов и пересылки кадров коммутатора Ethernet. Базовые настройки портов на коммутаторах  и способы мониторинга их состояния.

### Способ построение и назначение таблицы MAC
---
	Коммутатор Ethernet (Ethernet Switch) это многопортовый мост, который выполняет обработку данных на L1 TCP/IP. Коммутатор анализирует МАС-адреса передаваемых кадров и отправляет их только через те свои порты, к которым подключены станции назначения для данного кадра.
	При передаче кадров коммутатор использует таблицу фильтрации (Content Addressable Memory, CAM). Если MAC-адрес назначения кадра отсутствует в CAM, коммутатор отправляет его через все свои порты, кроме тогёо с которого кадр был принят.
	**Основные функции**
		Коммутатор записывает в таблицу фильтрации MAC_адрес источника, полученного кадра
		![[Pasted image 20240618012241.png]]
		Коммутатор отправляет кадр только на тот порт, который указан в таблице CAM.
		![[Pasted image 20240618012312.png]]
	
### Формирование таблицы CAM 

---
	Для того чтобы заполнить таблицу, мост использует режим самообучения. Мост фиксирует адрес источника у принятого кадра и формирует запись в своей таблице, указывая в ней номер порта, и МАС-адрес **именно** источника этого кадра.
	ПС4 захотел пообщаться с пк 3, мост отработал как хаб, отправил адрес во все порты, потом записал и закрепил за 3 портом адрес пк 4.
		![[Pasted image 20240618012759.png]]
	После запроса, пс3 отправляет ответ, и таким же образом он записывается в таблицу и получает порт 2. Его ответ идет СРАЗУ в пк 4, потому что мак пк 4 уже есть в таблице КАМ![[Pasted image 20240618013929.png]]
	Когда пк 4 отправит запрос в пк 1, произойдет то же самое. Запрос пройдет по всем ПК, кроме ПК4, а первый ответит
	![[Pasted image 20240618014037.png]]
	, и его также запишут в таблицу 
	![[Pasted image 20240618014107.png]] 
	Тут из за того, что адрес назначения закреплен за тем же портом, коммутатор удаляет кадр. 

	![[Pasted image 20240618014214.png]]	
К двум базовым параметрам коммутатора относятся пропускная способность (bandwidth) и дуплексный режим, которые задаются для каждого отдельного порта коммутатора.
Для обмена данными  используются два типа настроек дуплексного режима.
	• Полнодуплексный режим: одновременная отправка и получение данных в обе стороны.
	• Полудуплексный режим: отправка данных только одной стороной.
Автоопределение — это дополнительная функция, которой оснащено большинство коммутаторов и сетевых плат Ethernet. Автоопределение позволяет двум устройствам автоматически обмениваться информацией о скорости и возможностях дуплексного режима.
Важно чтобы оба коммутатора работали в одном режиме обмена данными, если они будут отличаться, возникнут проблемы с производительностью. 
Это происходит при сбросе одного или обоих портов канала, в результате чего автоопределение не приводит к одинаковой конфигурации обоих устройств связи. • Это также может произойти тогда, когда пользователи меняют конфигурацию на одной стороне канала и забывают про другую